<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
  <meta charset="UTF-8">
  <title>PRO - Review & Publish Winners</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body { background-color: #f8f9fa; }
    .sidebar { width: 250px; min-height: 100vh; background: #212529; color: white; position: fixed; }
    .sidebar a { display: block; padding: 12px 20px; color: white; text-decoration: none; }
    .sidebar a:hover, .sidebar a.active { background: #343a40; }
    .content { margin-left: 250px; padding: 20px; }
    .card { border-radius: 12px; margin-bottom: 20px; }
  </style>
</head>
<body>

<div class="sidebar">
  <h3 class="text-center py-3">ðŸ’¼ PRO Panel</h3>
  <a th:href="@{/pro/feedback}"><i class="bi bi-chat-dots"></i> Feedback</a>
  <a th:href="@{/pro/winners/review}" class="active"><i class="bi bi-trophy"></i> Publish Winners</a>
  <a th:href="@{/logout}"><i class="bi bi-box-arrow-right"></i> Logout</a>
</div>

<div class="content">
  <h2 class="mb-4"><i class="bi bi-trophy"></i> Review & Publish Winners</h2>
  <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
  <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

  <div class="card shadow p-4">
    <h5 class="mb-3">Winners Awaiting Publication</h5>

    <div th:if="${#lists.isEmpty(pendingWinners)}" class="text-center text-muted p-4">
      <p>There are no winners awaiting review at this time.</p>
    </div>

    <form th:if="${!#lists.isEmpty(pendingWinners)}" th:action="@{/pro/winners/publish}" method="post" onsubmit="return confirm('Are you sure you want to publish these winners? This will make them visible to the public.');">
      <table class="table table-hover align-middle">
        <thead class="table-light">
        <tr>
          <th>Winner</th>
          <th>Category</th>
          <th>Add Public Description</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="w : ${pendingWinners}">
          <td th:text="${w.nominee.name}"></td>
          <td th:text="${w.category.name}"></td>
          <td>
            <textarea class="form-control" th:name="'description-' + ${w.id}" rows="2" required placeholder="e.g., An outstanding achievement in modern music..."></textarea>
          </td>
        </tr>
        </tbody>
      </table>
      <button type="submit" class="btn btn-success mt-3 w-100">
        <i class="bi bi-megaphone"></i> Publish All Listed Winners
      </button>
    </form>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>